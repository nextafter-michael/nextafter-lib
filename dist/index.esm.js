var e={273:()=>{},843:()=>{}},t={};function o(n){var s=t[n];if(void 0!==s)return s.exports;var a=t[n]={exports:{}};return e[n](a,a.exports,o),a.exports}o.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return o.d(t,{a:t}),t},o.d=(e,t)=>{for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var n={};o.d(n,{Hm:()=>a(),M6:()=>i,zD:()=>l(),Lx:()=>v,Xs:()=>g,Ay:()=>S,cs:()=>T,$c:()=>h,cH:()=>p,g6:()=>E,EM:()=>x,_P:()=>w,WF:()=>f,nV:()=>y});var s=o(843),a=o.n(s);class r{static getURL="https://pxl.nextafter.org/get_cors.php";static sendURL="https://pxl.nextafter.org/tracker.php";static validQueryParams=["id","type","range","from","to","bypass"];static validateQueryParamValues={amt:e=>e&&!isNaN(e)&&e>0,type:e=>[void 0,"single","recurring","unbounce"].includes(e),range:e=>[void 0,"hour","week","month","year","all"].includes(e),from:e=>e&&"string"==typeof e&&/^\d+$/.test(e)&&8===e.length&&!isNaN(Date.parse(e)),to:e=>e&&"string"==typeof e&&/^\d+$/.test(e)&&8===e.length&&!isNaN(Date.parse(e)),name:e=>e&&"string"==typeof e&&e.length>0,state:e=>e&&"string"==typeof e&&e.length>0,city:e=>e&&"string"==typeof e&&e.length>0};static sendPixel=function(e){const t=new Image;t.onload=function(){console.log("Pixel sent successfully."),this.remove()},t.onerror=function(){console.error("Error sending pixel."),this.remove()},t.src=e,document.body.appendChild(t)};constructor(e){const t=Symbol("id");this._getId=function(){return this[t]},this._setId=function(e){this[t]=e};const o=Symbol("debug_mode");this._getDebugMode=function(){return this[o]},this._setDebugMode=function(e){this[o]=e},this._setId(e),this._setDebugMode(!1),this.responses=[]}get(e={},t=void 0){const o=new URL(r.getURL);return o.searchParams.append("id",this.id),Object.entries(e).filter((([e,t])=>void 0!==t)).map((([e,t])=>[e.toLocaleLowerCase(),t])).sort((([e],[t])=>{const o=r.validQueryParams;return o.indexOf(e)-o.indexOf(t)})).forEach((([e,t])=>{if("id"==e)o.searchParams.append("id",this.id),console.warn("Warning: Cannot override ID set by constructor.");else if("bypass"==e)console.warn("Cannot use bypass parameter in get() method. Enable pixel instance debug mode instead to bypass cache.");else if("from"==e||"to"==e){const n=new Date(t).toISOString().split("T")[0].replace(/-/g,"");if(!r.validateQueryParamValues[e](n))return console.warn(`Warning: Invalid date format for "${e}" ignored. Expected format is YYYYMMDD.`);o.searchParams.append(e,n)}else if(r.validQueryParams.includes(e)){if(r.validateQueryParamValues[e]&&!r.validateQueryParamValues[e](t))return console.warn(`Warning: Invalid value for "${e}" ignored.`);o.searchParams.append(e,t)}else console.warn(`Warning: Invalid query parameter "${e}" ignored.`)})),this.debug&&(o.searchParams.append("bypass","1"),console.warn("Warning! Bypass mode is intended for testing purposes only. Disable it before launching your experiment.")),new Promise((async(e,n)=>{try{const s=await fetch(o.href,{method:"GET",headers:{accept:"application/json"}});if(200!=s.status)throw new Error("HTTP error:",s.status);const a=await s.json();t&&"function"==typeof t&&t(a),this.responses.push(a),e(a),setTimeout((()=>{n({error:"Timeout: No response from server after 10 seconds."})}),1e4)}catch(e){console.error("Failed to fetch donations from server:",e),n({error:err.message})}}))}get_all(e={},t=void 0){const o=new URL(r.getURL);return o.searchParams.append("id",this.id),Object.entries(e).filter((([e,t])=>void 0!==t)).map((([e,t])=>[e.toLocaleLowerCase(),t])).sort((([e],[t])=>{const o=[...r.validQueryParams,"limit","offset"];return o.indexOf(e)-o.indexOf(t)})).forEach((([e,t])=>{if("id"==e)o.searchParams.append("id",this.id),console.warn("Warning: Cannot override ID set by constructor.");else if("bypass"==e)console.warn("Cannot use bypass parameter in get() method. Enable pixel instance debug mode instead to bypass cache.");else if("from"==e||"to"==e){const n=new Date(t).toISOString().split("T")[0].replace(/-/g,"");if(!r.validateQueryParamValues[e](n))return console.warn(`Warning: Invalid date format for "${e}" ignored. Expected format is YYYYMMDD.`);o.searchParams.append(e,n)}else if([...r.validQueryParams,"limit","offset"].includes(e)){if(r.validateQueryParamValues[e]&&!r.validateQueryParamValues[e](t))return console.warn(`Warning: Invalid value for "${e}" ignored.`);o.searchParams.append(e,t)}else console.warn(`Warning: Invalid query parameter "${e}" ignored.`)})),this.debug&&(o.searchParams.append("bypass","1"),console.warn("Warning! Bypass mode is intended for testing purposes only. Disable it before launching your experiment.")),new Promise((async(e,n)=>{try{const s=await fetch(o.href,{method:"GET",headers:{accept:"application/json"}});if(200!=s.status)throw new Error("HTTP error:",s.status);const a=await s.json();t&&"function"==typeof t&&t(a),this.responses.push(a),e(a),setTimeout((()=>{n({error:"Timeout: No response from server after 10 seconds."})}),1e4)}catch(e){console.error("Failed to fetch donations from server:",e),n({error:err.message})}}))}track(e,t){const o=new URL(r.sendURL);if(o.searchParams.append("id",this.id),o.searchParams.append("amount",e),"single"!==t&&"recurring"!==t)return console.warn(`Warning: Invalid type "${t}" ignored. Valid types are "single" or "recurring".`);o.searchParams.append("type",t),this.sendPixel(sendURL.href)}get id(){return this._getId()}set debug(e){this._setDebugMode(!!e),console.info("Debug mode now "+(this._getDebugMode()?"enabled":"disabled"))}get debug(){return this._getDebugMode()}}const i=r;var d=o(273),l=o.n(d);function c(){return this.querySelector("slot")||this.shadowRoot&&this.shadowRoot.querySelector("slot")}window.HTMLElement.prototype.getSlot=window.HTMLElement.prototype.getSlot||c;const h=c;function u(e){return"NaN"!==parseInt(e)&&e>=0?Array.from(h.call(this).assignedNodes({flatten:!0}))[e]:Array.from(h.call(this).assignedNodes({flatten:!0}))}window.HTMLElement.prototype.getSlotNodes=window.HTMLElement.prototype.getSlotNodes||u;const p=u;function m(){return"NaN"!==parseInt(index)&&index>=0?Array.from(this.shadowRoot.children)[index]:Array.from(this.shadowRoot.children)}window.HTMLElement.prototype.shadowChildren=window.HTMLElement.prototype.shadowChildren||m;const w=m;function y(e){let t=[];const o=n=>{n instanceof HTMLElement&&n.matches(e)&&t.push(n),customElements.get(n.tagName.toLowerCase())?(n.shadowRoot?Array.from(n.shadowRoot.children):[]).forEach((e=>o(e))):Array.from(n.children).forEach((e=>o(e))),"slot"===n.tagName.toLowerCase()&&n.assignedNodes({flatten:!0}).forEach((e=>{e.nodeType===Node.ELEMENT_NODE&&o(e)}))};return this instanceof Document?o(this.documentElement):o(this),t.length>0?t:void 0}function f(e){let t=[];const o=n=>{if(n instanceof HTMLElement&&n.matches(e))return t.push(n);customElements.get(n.tagName.toLowerCase())?(n.shadowRoot?Array.from(n.shadowRoot.children):[]).forEach((e=>o(e))):Array.from(n.children).forEach((e=>o(e))),"slot"===n.tagName.toLowerCase()&&n.assignedNodes({flatten:!0}).forEach((e=>{e.nodeType===Node.ELEMENT_NODE&&o(e)}))};return this instanceof Document?o(this.documentElement):o(this),t.length>0?t[0]:void 0}window.HTMLElement.prototype.shadowQuerySelectorAll=window.HTMLElement.prototype.shadowQuerySelectorAll||y,window.HTMLElement.prototype.shadowQuerySelector=window.HTMLElement.prototype.shadowQuerySelector||f,window.Document.prototype.shadowQuerySelectorAll=window.HTMLElement.prototype.shadowQuerySelectorAll||y,window.Document.prototype.shadowQuerySelector=window.HTMLElement.prototype.shadowQuerySelector||f,window.DocumentFragment.prototype.shadowQuerySelectorAll=window.HTMLElement.prototype.shadowQuerySelectorAll||y,window.DocumentFragment.prototype.shadowQuerySelector=window.HTMLElement.prototype.shadowQuerySelector||f;const g=function(e,t=1e4){return new Promise(((o,n)=>{if(document.querySelector(e)&&document.querySelector(e).isConnected)return o(document.querySelector(e));let s;const a=new MutationObserver((t=>{for(const n of t)for(const t of n.addedNodes)if(t instanceof HTMLElement&&t.matches(e)&&t.isConnected)return clearInterval(s),a.disconnect(),o(t)}));a.observe(document.documentElement,{childList:!0,subtree:!0}),s=setInterval((e=>{if(document.querySelector(e)&&document.querySelector(e).isConnected)return clearInterval(s),a.disconnect(),o(document.querySelector(e))}),50,e),setTimeout((t=>{t.disconnect(),n(new Error(`Element with selector "${e}" not found within the time limit.`))}),t,a)}))},E=function(e,t=0,...o){const n=t=>{if(!t.toElement&&!t.relatedTarget){document.removeEventListener("mouseout",n),window.onblur=()=>{},e.call(null,...o);const t=e=>{"dialog"==e.target.tagName.toLowerCase()&&(e.target.close(),window.onclick=()=>{})};window.onclick=t}};return setTimeout((()=>{document.addEventListener("mouseout",n),window.onblur=n}),t)},x=function(e,t,...o){let n=!1;window.addEventListener("scroll",(function s(){const a=window.scrollY,r=window.innerHeight,i=document.documentElement.scrollHeight;0==n&&a+r*t*.5>=i*t*.5&&(e(...o),n=!0,window.removeEventListener("scroll",s))}))};class b extends HTMLElement{static defaultOptions={typingSpeed:16,delayBetween:4,delayInitial:2,iterationCount:1/0};static CSS="\n        typing-text[typing] { position: relative }\n        typing-text[typing]:not(:has(::part(cursor)))::after::after {\n            content: '';\n            display: block;\n            position: absolute; right: -4px; bottom: -3px;\n            width: 2px;\n            height: 1.75em;\n            background-color: white;\n            transform: scaleY(0.65) translateY(1px);\n            animation: 1s ease-in-out 0s infinite running cursor-blink;\n        }\n        typing-text::part(cursor) {\n            display: inline-block;\n            line-height: 1.2;\n            width: 2px;\n            height: 1em;\n            background-color: white;\n            transform: scaleY(110%) translate(1px, 1px);\n        }\n        @keyframes cursor-blink {\n            0% { opacity: 1 }\n            50% { opacity: 0 }\n            100% { opacity: 1 }\n        }\n    ";static delay=e=>new Promise((t=>setTimeout(t,e)));static cursor=()=>{const e=document.createElement("i");return e.classList.add("cursor"),e.setAttribute("part","cursor"),e.animate([{opacity:1},{opacity:0},{opacity:1}],{duration:1e3,easing:"ease-in-out",iterations:1/0}),e};static async writeText(e){const t=e.nodeType===Node.ELEMENT_NODE;if(this.shadowRoot.innerHTML="",t){const t=e.cloneNode(!0),o=b.cursor();t.textContent="",this.shadowRoot.append(t),this.shadowRoot.append(o),t.setAttribute("cursor","typing"),e=e.textContent.trim();for(let o=0;o<e.length;o++)this.animationPaused?(await b.delay(100),o--):(t.textContent=t.textContent+e[o],await b.delay(1e3/this.options.typingSpeed));return t.removeAttribute("cursor"),o.remove(),t}{const t=document.createTextNode("");t.nodeValue="",this.shadowRoot.append(t),e=e.nodeValue.trim();for(let o=0;o<e.length;o++)this.animationPaused?(await b.delay(100),o--):(t.nodeValue=t.nodeValue+e[o],await b.delay(1e3/this.options.typingSpeed));return t}}static async deleteText(){if(this.shadowRoot.firstChild.nodeType===Node.ELEMENT_NODE){const e=this.shadowRoot.firstChild,t=b.cursor();for(this.shadowRoot.append(t),e.setAttribute("cursor","typing");e.textContent.length>0;)this.animationPaused?await b.delay(100):(e.textContent=e.textContent.slice(0,-1),await b.delay(1e3/this.options.typingSpeed));e.removeAttribute("cursor"),t.remove()}else{const e=this.shadowRoot.firstChild;for(;e.nodeValue.length>0;)this.animationPaused?await b.delay(100):(e.nodeValue=e.nodeValue.slice(0,-1),await b.delay(1e3/this.options.typingSpeed))}}constructor(){super(),this.attachShadow({mode:"open"}),this.slots=new Array,this.options={...b.defaultOptions};const e=this.attributes;for(let{name:t,value:o}of e)switch(Number.isNaN(parseFloat(o))||(o=parseFloat(o)%1==0?parseInt(o):parseFloat(o)),t){case"typing-speed":this.options.typingSpeed=o;break;case"delay-between":this.options.delayBetween=o;break;case"delay-initial":this.options.delayInitial=o;break;case"iteration-count":this.options.interationCount=o;break;default:this.options[t]=o}return 0==this.shadowRoot.ownerDocument.querySelectorAll('style[name="TypingText"]').length&&this.ownerDocument.head.insertAdjacentHTML("beforeend",`<style name="TypingText" type="text/css">${b.CSS}</style>`),window.addEventListener("blur",(()=>this.pauseAnimation())),window.addEventListener("focus",(()=>this.resumeAnimation())),this}connectedCallback(){Array.from(this.childNodes).forEach(((e,t)=>{switch(e.nodeType){case Node.TEXT_NODE:e.nodeValue.trim().length>0&&this.addSlot(e);break;case Node.ELEMENT_NODE:if(e.matches("br")||e.matches("hr")||e.matches("input")){console.warn("Element that cannot contain text nodes or other elements will be ignored:",e),e.remove();break}this.addSlot(e)}})),this.startAnimation()}addSlot(e){this.shadowRoot.append(e),this.slots.push(e)}removeSlot(e){(this.slots.includes(e)||-1!==this.slots.indexOf(e))&&(this.slots=this.slots.splice(this.slots.indexOf(e),1)),this.shadowRoot.contains(e)&&e.remove()}addSlots(...e){e.forEach((e=>this.addSlot(e)))}removeSlots(...e){e.forEach((e=>this.removeSlot(e)))}addText(e){const t=document.createTextNode(e);this.addSlot(t)}removeText(e){const t=this.slots.find((t=>t.nodeValue=e||t.match(e)));t&&this.removeSlot(t)}async startAnimation(){this.animationIndex=0;let e=0;const t=this.slots[this.animationIndex++].cloneNode(!0);if(this.shadowRoot.innerHTML="",this.shadowRoot.append(t),0===this.options.iterationCount)return this.pauseAnimation();for(await b.delay(1e3*this.options.delayInitial);this.options.iterationCount===1/0||e<this.options.iterationCount;){if(this.animationPaused){await b.delay(100);continue}if(0===this.slots.length){console.warn("<typing-text>","No text to animate.\n",this);break}const t=this.slots[this.animationIndex];this.setAttribute("typing",""),await b.deleteText.call(this),await b.writeText.call(this,t),this.removeAttribute("typing"),this.animationIndex=(this.animationIndex+1)%this.slots.length,0===this.animationIndex&&e++,await b.delay(1e3*this.options.delayBetween)}}pauseAnimation(){this.animationPaused=!0}resumeAnimation(){this.animationPaused=!1,this.startAnimation()}}const v=b,T=async function(e,t={},o=void 0){const n=new r(e);return await n.get(t,o)},S={Popup:l(),ExitIntentPopup:a(),NextAfterPixel:i,getSlot:h,getSlotNodes:p,shadowChildren:w,shadowQuerySelector:f,shadowQuerySelectorAll:y,asyncWaitForElement:g,fetchDonations:T,onExitIntent:E,onScrollDepth:x,TypingText:v};var L=n.Hm,N=n.M6,P=n.zD,M=n.Lx,A=n.Xs,D=n.Ay,C=n.cs,I=n.$c,R=n.cH,H=n.g6,Q=n.EM,_=n._P,O=n.WF,k=n.nV;export{L as ExitIntentPopup,N as NextAfterPixel,P as Popup,M as TypingText,A as asyncWaitForElement,D as default,C as fetchDonations,I as getSlot,R as getSlotNodes,H as onExitIntent,Q as onScrollDepth,_ as shadowChildren,O as shadowQuerySelector,k as shadowQuerySelectorAll};